<main class="h-full 2xl:ml-[--w-side] xl:ml-[--w-side-md] md:ml-[--w-side-small]">

  <div class="2xl:max-w-6xl mx-auto h-screen relative shadow-lg overflow-hidden border1 max-md:pt-14">

    <div class="flex bg-white dark:bg-dark2">

      <!-- sidebar -->
      <div class="md:w-[360px] relative border-r dark:border-slate-700">

        <div id="side-chat"
             class="top-0 left-0 max-md:fixed max-md:w-5/6 max-md:h-screen bg-white z-50 max-md:shadow max-md:-translate-x-full dark:bg-dark2">

          <!-- heading title -->
          <div class="p-4 border-b dark:border-slate-700">

            <div class="flex mt-2 items-center justify-between">

              <h2 class="text-2xl font-bold text-black ml-1 dark:text-white"> Chats </h2>

              <!-- right action buttons -->
              <div class="flex group relative relative items-center gap-2.5">
                <button class="">
                  <svg-icon src="assets/icons/solid/settings.svg"></svg-icon>
                </button>
                <div
                  class="md:w-[270px] w-full absolute bg-white rounded-2xl border-[1px] px-2 -left-1/2 top-1/2 z-50 hidden group-hover:block"
                >
                  <nav>
                    <!--                    <a href="#">-->
                    <!--                      <svg-icon class="text-2xl shrink-0 -ml-1 md hydrated" name="checkmark-outline" role="img"-->
                    <!--                                aria-label="checkmark outline"></svg-icon>-->
                    <!--                      Mark all as read </a>-->
                    <!--                    <a href="#">-->
                    <!--                      <svg-icon class="text-2xl shrink-0 -ml-1 md hydrated" name="notifications-outline" role="img"-->
                    <!--                                aria-label="notifications outline"></svg-icon>-->
                    <!--                      notifications setting </a>-->
                    <!--                    <a href="#">-->
                    <!--                      <svg-icon class="text-xl shrink-0 -ml-1 md hydrated" name="volume-mute-outline" role="img"-->
                    <!--                                aria-label="volume mute outline"></svg-icon>-->
                    <!--                      Mute notifications </a>-->
                  </nav>
                </div>
                <button class="">
                  <svg-icon src="assets/icons/solid/check-circle.svg"></svg-icon>
                </button>
              </div>
            </div>

            <!-- search -->
            <div class="relative mt-4">
              <div class="absolute left-3 bottom-1/2 translate-y-1/2 flex">
                <svg-icon src="assets/icons/solid/search.svg" class="fill-gray-400"
                          [svgClass]="'text-gray-500'"></svg-icon>
              </div>
              <input type="text" placeholder="Search" class="w-full bg-gray-100 !pl-10 !py-2 !rounded-lg">
            </div>

          </div>


          <!-- users list -->
          <div class="space-y-2 p-2 overflow-y-auto h-[calc(100vh-127px)]"

          >

            <app-user [chat]="chat" *ngFor="let chat of chats">

            </app-user>
            <div *ngIf="chats.length == 0"
                 class="w-full h-full flex flex-col items-center justify-center text-center m-auto font-semibold text-gray-500">
              No chats yet.
            </div>

          </div>
        </div>
      </div>

      <!-- message center -->
      <div
        *ngIf="!chat"
        class="flex flex-col w-full h-full m-auto justify-center items-center text-center font-semibold text-gray-500">
        Chat not selected.
      </div>
      <div *ngIf="chat" class="flex-1">

        <!-- chat heading -->
        <div
          class="flex items-center justify-between gap-2 w- px-6 py-3.5 z-10 border-b dark:border-slate-700 uk-animation-slide-top-medium">

          <div class="flex items-center sm:gap-4 gap-2">

            <!-- toggle for mobile -->
            <button type="button"
                    class="md:hidden"
                    aria-expanded="true">
              <svg-icon name="chevron-back-outline" class="text-2xl -ml-4 md hydrated" role="img"
                        aria-label="chevron back outline"></svg-icon>
            </button>

            <div class="relative cursor-pointer max-md:hidden" uk-toggle="target: .rightt ; cls: hidden" tabindex="0"
                 aria-expanded="true">
              <img [src]="chat.guest?.profileImage?.url" alt="" class="w-8 h-8 rounded-full shadow">
              <div class="w-2 h-2 bg-teal-500 rounded-full absolute right-0 bottom-0 m-px"></div>
            </div>
            <div class="cursor-pointer">
              <div class="text-base font-bold"> {{chat.guest?.firstName}} {{chat.guest?.lastName}}</div>
              <div class="text-xs text-green-500 font-semibold"> Online</div>
            </div>

          </div>

          <div class="flex items-center gap-2">
            <button type="button" class="button__ico">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-6 h-6">
                <path fill-rule="evenodd"
                      d="M2 3.5A1.5 1.5 0 013.5 2h1.148a1.5 1.5 0 011.465 1.175l.716 3.223a1.5 1.5 0 01-1.052 1.767l-.933.267c-.41.117-.643.555-.48.95a11.542 11.542 0 006.254 6.254c.395.163.833-.07.95-.48l.267-.933a1.5 1.5 0 011.767-1.052l3.223.716A1.5 1.5 0 0118 15.352V16.5a1.5 1.5 0 01-1.5 1.5H15c-1.149 0-2.263-.15-3.326-.43A13.022 13.022 0 012.43 8.326 13.019 13.019 0 012 5V3.5z"
                      clip-rule="evenodd"></path>
              </svg>
            </button>
            <button type="button" class="hover:bg-slate-100 p-1.5 rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                   stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round"
                      d="M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"></path>
              </svg>
            </button>
            <button type="button" (click)="isSideBarHidden = false"
                    class="hover:bg-slate-100 p-1.5 rounded-full"
                    uk-toggle="target: .rightt ; cls: hidden" aria-expanded="true">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                   stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                      d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"></path>
              </svg>
            </button>
          </div>

        </div>

        <!-- chats bubble -->
        <div class="w-full p-5 py-10 overflow-y-auto md:h-[calc(100vh-137px)] h-[calc(100vh-250px)]">

          <div class="py-10 text-center text-sm lg:pt-8">
            <img [src]="chat.guest?.profileImage?.url" class="w-24 h-24 rounded-full mx-auto mb-3" alt="">
            <div class="mt-8">
              <div
                class="md:text-xl text-base font-medium text-black dark:text-white"> {{chat.guest?.firstName}} {{chat.guest?.lastName}}</div>
              <div class="text-gray-500 text-sm   dark:text-white/80"> @{{chat.guest?.profileName}}</div>
            </div>
            <div class="mt-3.5">
              <a [routerLink]="['/app', 'chats', chat.guest?.id]"
                 class="inline-block bg-gray-100 rounded-lg px-4 py-1.5 text-sm font-semibold">View
                profile</a>
            </div>
          </div>

          <div class="flex flex-col text-sm font-medium space-y-6">

            <app-message *ngFor="let message of chat.messages"
                         [message]="message"
            ></app-message>

            <!-- sent media-->
          </div>
        </div>

        <!-- sending message area -->
        <div class="flex items-center md:gap-4 gap-2 md:p-3 p-2 overflow-hidden">

          <div id="message__wrap" class="flex items-center gap-2 h-full dark:text-white -mt-1.5">

            <button type="button" class="shrink-0" aria-haspopup="true" aria-expanded="false">
              <svg-icon src="assets/icons/solid/plus-circle.svg"></svg-icon>
            </button>
            <div
              class="dropbar hidden pt-36 h-60 bg-gradient-to-t via-white from-white via-30% from-30% dark:from-slate-900 dark:via-900 uk-drop"
              uk-drop="stretch: x; target: #message__wrap ;animation:  slide-bottom ;animate-out: true; pos: top-left; offset:10 ; mode: click ; duration: 200">

              <div class="sm:w-full p-3 flex justify-center gap-5"
                   uk-scrollspy="target: > button; cls: uk-animation-slide-bottom-small; delay: 100;repeat:true">

                <button type="button"
                        class="bg-sky-50 text-sky-600 border border-sky-100 shadow-sm p-2.5 rounded-full shrink-0 duration-100 hover:scale-[1.15] dark:bg-dark3 dark:border-0"
                        style="opacity: 0;">
                  <svg-icon class="text-3xl flex md hydrated" name="image" role="img" aria-label="image"></svg-icon>
                </button>
                <button type="button"
                        class="bg-green-50 text-green-600 border border-green-100 shadow-sm p-2.5 rounded-full shrink-0 duration-100 hover:scale-[1.15] dark:bg-dark3 dark:border-0"
                        style="opacity: 0;">
                  <svg-icon class="text-3xl flex md hydrated" name="images" role="img" aria-label="images"></svg-icon>
                </button>
                <button type="button"
                        class="bg-pink-50 text-pink-600 border border-pink-100 shadow-sm p-2.5 rounded-full shrink-0 duration-100 hover:scale-[1.15] dark:bg-dark3 dark:border-0"
                        style="opacity: 0;">
                  <svg-icon class="text-3xl flex md hydrated" name="document-text" role="img"
                            aria-label="document text"></svg-icon>
                </button>
                <button type="button"
                        class="bg-orange-50 text-orange-600 border border-orange-100 shadow-sm p-2.5 rounded-full shrink-0 duration-100 hover:scale-[1.15] dark:bg-dark3 dark:border-0"
                        style="opacity: 0;">
                  <svg-icon class="text-3xl flex md hydrated" name="gift" role="img" aria-label="gift"></svg-icon>
                </button>
              </div>
            </div>

            <button type="button" class="shrink-0" aria-haspopup="true" aria-expanded="false">
              <svg-icon src="assets/icons/solid/smile.svg"></svg-icon>
            </button>
            <div class="dropbar hidden p-2 uk-drop"
                 uk-drop="stretch: x; target: #message__wrap ;animation: uk-animation-scale-up uk-transform-origin-bottom-left ;animate-out: true; pos: top-left ; offset:2; mode: click ; duration: 200 ">

              <div
                class="sm:w-60  bg-white shadow-lg border rounded-xl  pr-0 dark:border-slate-700 dark:bg-dark3">

                <h4 class="text-sm font-semibold p-3 pb-0">Send Imogi</h4>

                <div class="grid grid-cols-5 overflow-y-auto max-h-44 p-3 text-center text-xl">

                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ˜Š</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ¤©</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ˜Ž</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ¥³</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ˜‚</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ¥°</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ˜¡</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ˜Š</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ¤©</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ˜Ž</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ¥³</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ˜‚</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ¥°</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ˜¡</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ¤”</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ˜Š</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ¤©</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ˜Ž</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ¥³</div>
                  <div class="hover:bg-secondery p-1.5 rounded-md hover:scale-125 cursor-pointer duration-200"> ðŸ˜‚</div>

                </div>


              </div>

            </div>

          </div>

          <form class="relative flex-1">
            <textarea placeholder="Write your message"
                      rows="1"
                      name="create-message"
                      [(ngModel)]="createMessage.text"
                      class="w-full resize-none bg-secondery rounded-full px-4 p-2"></textarea>

            <button type="button"
                    (click)="sendMessage()"
                    class="text-white shrink-0 p-2 absolute right-0.5 top-0
            hover:animate-pulse">
              <svg-icon class="text-gray-500 "
                        src="assets/icons/solid/send.svg"
                        role="img"
                        aria-label="send outline"></svg-icon>
            </button>

          </form>

          <button type="button" class="flex h-full dark:text-white">
            <svg-icon class="text-3xl flex -mt-3 md hydrated" name="heart-outline" role="img"
                      aria-label="heart outline"></svg-icon>
          </button>

        </div>

      </div>

      <!-- user profile right info -->
      <div class="w-full h-full absolute top-0 right-0 z-10 transition-transform "
           [ngClass]="{'hidden':isSideBarHidden}"
      >
        <div
          class="w-[360px] border-l shadow-lg h-screen bg-white absolute right-0 top-0 uk-animation-slide-right-medium delay-200 z-50 dark:bg-dark2 dark:border-slate-700">

          <div class="w-full h-1.5 bg-gradient-to-r to-purple-500 via-red-500 from-pink-500 -mt-px"></div>

          <div class="py-10 text-center text-sm pt-20">
            <img src="https://picsum.photos/200" class="w-24 h-24 rounded-full mx-auto mb-3" alt="">
            <div class="mt-8">
              <div class="md:text-xl text-base font-medium text-black dark:text-white"> Monroe Parker</div>
              <div class="text-gray-500 text-sm mt-1 dark:text-white/80">@Monroepark</div>
            </div>
            <div class="mt-5">
              <a href="profile.html" class="inline-block rounded-full px-4 py-1.5 text-sm font-semibold bg-gray-100">View
                profile</a>
            </div>
          </div>

          <hr class="opacity-80 dark:border-slate-700">

          <ul class="text-base font-medium p-3">
            <li>
              <div class="flex items-center gap-5 rounded-md p-3 w-full hover:bg-secondery">
                <svg-icon src="assets/icons/solid/bell.svg"></svg-icon>
                Mute Notification


                <label class="relative inline-flex items-center cursor-pointer ml-auto">
                  <input type="checkbox" value="" class="sr-only peer">
                  <div
                    class="w-11 h-6 bg-gray-200 peer-focus:outline-none dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                </label>

                <!--                <label class="switch cursor-pointer ml-auto">-->
                <!--                  <input type="checkbox" checked="">-->
                <!--                  <span class="switch-button !relative"></span>-->
                <!--                </label>-->
              </div>
            </li>
            <li>
              <button type="button" class="flex items-center gap-5 rounded-md p-3 w-full hover:bg-secondery">
                <svg-icon src="assets/icons/solid/flag.svg"></svg-icon>
                Report
              </button>
            </li>
            <li>
              <button type="button" class="flex items-center gap-5 rounded-md p-3 w-full hover:bg-secondery">
                <svg-icon src="assets/icons/solid/settings.svg"></svg-icon>
                Ignore messages
              </button>
            </li>
            <li>
              <button type="button" class="flex items-center gap-5 rounded-md p-3 w-full hover:bg-secondery">
                <svg-icon src="assets/icons/solid/stop-circle.svg"></svg-icon>
                Block
              </button>
            </li>
            <li>
              <button type="button" class="flex items-center gap-5 rounded-md p-3 w-full hover:bg-red-50 text-red-500">
                <svg-icon src="assets/icons/solid/trash-2.svg"></svg-icon>
                Delete Chat
              </button>
            </li>
          </ul>

          <!-- close button -->
          <button type="button"
                  (click)="isSideBarHidden = true"
                  class="absolute top-0 right-0 m-4 p-2 bg-gray-100 rounded-full"
                  uk-toggle="target: .rightt ; cls: hidden" aria-expanded="true">
            <svg-icon src="assets/icons/solid/x.svg"></svg-icon>
          </button>

        </div>

        <!-- overly -->
        <div (click)="isSideBarHidden = true"
             class="bg-slate-100/40 backdrop-blur absolute w-full h-full dark:bg-slate-800/40"
             uk-toggle="target: .rightt ; cls: hidden" tabindex="0" aria-expanded="true"></div>

      </div>

    </div>

  </div>


</main>
